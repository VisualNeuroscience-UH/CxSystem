

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Technical Overview &mdash; CxSystem 0.6 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="CxSystem 0.6 documentation" href="index.html"/>
        <link rel="next" title="Installation Instructions" href="installation.html"/>
        <link rel="prev" title="Introduction" href="introduction.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> CxSystem
          

          
          </a>

          
            
            
              <div class="version">
                0.3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Technical Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation Instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="config_tutorial.html">Configuration File Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="parallelism.html">Parallelism</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="reference.html">Reference Documentation</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">CxSystem</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Technical Overview</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/overview.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="technical-overview">
<h1>Technical Overview<a class="headerlink" href="#technical-overview" title="Permalink to this headline">¶</a></h1>
<p><strong>Selecting Python, C++ or GPU device:</strong></p>
<p>The device is selected in the model and network configuration file. Set the “device” to either “Python”, “Cpp” or “GeNN” (case insensitive). The Cpp (C++) device is a safe bet for most applications.</p>
<p><strong>How the CxSystem works:</strong></p>
<p>One of the strengths of the CxSystem is the ability to dynamically compile the model. This bypasses the traditional way of hard coding much of the model which would limit flexibility. This flexibility comes with some added complexity in the way the CxSystem builds the devices.</p>
<p>The implemented system employs the Brian2GeNN python module to generate GeNN (GPU enhanced Neuronal Network simulation environment) code for eventually running the Brian2 codes on GeNN. Note that using the GeNN device, CxSystem (via GeNN) only employs one of the GPUs in the system and therefore cannot be used in cluster. In order to understand how this system works, one should initially understand how Brian2GeNN limits Brian2. Most of the exclusions are presented in <a class="reference external" href="http://brian2genn.readthedocs.io/en/latest/introduction/exclusions.html">Brian2GeNN documentation</a>. Perhaps the most effective limitation is lack of support for using Multiple networks in Brian2, i.e. only the <em>magic network</em> can be used. Using the <em>magic network</em>, only the “visible” objects, that are explicitly defined in the code, will be collected. In other words, any Brian2 object that is created in a custom class, will not be collected and will eventually raise an error. We have used two solutions to address this issue, Syntax Bank and Global variables:</p>
<p><strong>- Build a Syntax Bank:</strong></p>
<p>In this method, a syntax string is built for all Brian2 internal objects. These syntaxes are then run after the main object call. Suppose the cortical system object is named <em>CX</em> and a NeuronGroup() object called <em>NG</em> is created in a method inside the <em>CX</em>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">NG</span> <span class="o">=</span> <span class="n">NeuronGroup</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">eqs</span><span class="p">)</span>
</pre></div>
</div>
<p>The <em>NG</em> will not be collected for magic network as it is inside a method of <em>CX</em>. However, we can anticipate a syntax for this neuron group and save it in a syntax bank attribute in <em>CX</em>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">syn1</span> <span class="o">=</span> <span class="s2">&quot;NG = NeuronGroup(1, eqs)&quot;</span>
<span class="n">CX</span><span class="o">.</span><span class="n">syntax_bank</span> <span class="o">=</span> <span class="n">append</span><span class="p">(</span><span class="n">CX</span><span class="o">.</span><span class="n">syntax_bank</span><span class="p">,</span> <span class="n">syn1</span><span class="p">)</span>
</pre></div>
</div>
<p>All of the elements of this <em>CX.syntax_bank</em> can then be iterated and run using the dynamic compiler, i.e. <strong>exec</strong> command. Note that all the sub objects of a syntax should be saved in syntax_bank as well. For instance, the last example will raise an error since <em>eqs</em> is not defined. Hence, before running the <em>syn1</em>, one should initially run the syntax for <em>eqs</em> object.</p>
<p>This method has a fundamental limitation: first, the syntax bank should run in a hierarchical manner. In previous example, the syntax for <em>eqs</em> should be run before <em>syn1</em>. Similarly, NeuronGroup() syntaxes should be run before Synapses() and synapses.connect() should be run after Synapses(). This process was manually coded into the main file for running the codes in a hierarchical manner, which we consider an untidy solution.</p>
<p>The syntax bank approach call for prefixes for object names. For instance, all of the NeuronGroup() should have a prefix of <em>NG</em> which is followed by a number based on a running index of the neuron group.</p>
<p>For each neuron group, similar prefixes are also needed for variables such as:</p>
<blockquote>
<div><ul class="simple">
<li>Number of neurons in each group: <em>NN</em></li>
<li>Equation: <em>NE</em></li>
<li>Threshold value: <em>NT</em></li>
<li>Reset value: <em>NRes</em></li>
<li>Refraction value: <em>NRef</em></li>
<li>Namespace: <em>NS</em></li>
</ul>
</div></blockquote>
<p>Several prefixes are also demanded for Synapses() objects:</p>
<blockquote>
<div><ul class="simple">
<li>Synaptic object: <em>S</em></li>
<li>Synaptic equation: <em>SE</em></li>
<li>Pre Synaptic group equation: <em>SPre</em></li>
<li>Post Synaptic group equation: <em>SPost</em></li>
<li>Namespace: <em>SNS</em></li>
<li>.connect(): <em>SC</em></li>
<li>weight: <em>SW</em></li>
</ul>
</div></blockquote>
<p>And similar prefixes for monitors:</p>
<blockquote>
<div><ul class="simple">
<li>Spike Monitors: <em>SpMon</em></li>
<li>State Monitors: <em>StMon</em></li>
</ul>
</div></blockquote>
<p><strong>- Update Globals():</strong></p>
<p>Although mentioned as a dangerous method in the literature, updating the Globals() directly, is a practical approach in our case. This method  uses aforementioned prefixes and corresponding variables. However, the variables does not have to <em>wait</em> inside the syntax bank to be run after the main object call. They can be implicitly executed inside the main object and still become “visible” to the magic network by putting them in Globals(). Thus, the user does not have to face a manual syntax-executer outside of the main object call.</p>
<p>Accordingly, most of the <em>exec</em> commands inside the main object CxSystem() are creating the required variables and making them visible to <em>magic network</em> of Brian2 by updating the Globals(). In the following example, the NG0 is put into the Globals():</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nb">globals</span><span class="p">()</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;NG0&#39;</span><span class="p">:</span><span class="n">NG0</span><span class="p">})</span>
</pre></div>
</div>
<p>Fig.1 illustrates the schematic of the cortical system internal component:</p>
<div class="figure align-center" id="id1">
<img alt="_images/main_uml.png" src="_images/main_uml.png" />
<p class="caption"><span class="caption-text">Fig.1 simplified UML diagram of the cortical system</span></p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="installation.html" class="btn btn-neutral float-right" title="Installation Instructions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="introduction.html" class="btn btn-neutral" title="Introduction" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Andalibi, V., Hokkanen H., Vanni, S..

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.6',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>